<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <title>Five in a Row</title>
    <style>
      * {
        padding: 0;
        margin: 0;
      }
      canvas {
        background: #eeeeee;
        display: block;
        margin: 0 auto;
      }
    </style>
  </head>
  <body>
    <canvas id="myCanvas" width="760" height="760"></canvas>

    <script>
        const canvas = document.getElementById("myCanvas");
        const ctx = canvas.getContext("2d");
        const dotRadius = 10;
        const gridSize = 19;
        const cellSize = canvas.width / gridSize;

        let dots = [];

        canvas.addEventListener("click", click);

        function drawGrid() {
            ctx.strokeStyle = "#ccc";
            ctx.lineWidth = 1;

            for (let i = 0; i <= gridSize; i++) {
                let pos = i * cellSize;

                // vertical line
                ctx.beginPath();
                ctx.moveTo(pos, 0);
                ctx.lineTo(pos, canvas.height);
                ctx.stroke();

                // horizontal line
                ctx.beginPath();
                ctx.moveTo(0, pos);
                ctx.lineTo(canvas.width, pos);
                ctx.stroke();
            }
        }

        function drawDot(e) {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            dots.push({ row, col });
        }

        function click(e) {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            const col = Math.round(x / cellSize);
            const row = Math.round(y / cellSize);

            const alreadyExists = dots.some(d => d.row === row && d.col === col);

            if (!alreadyExists) {
                dots.push({ row, col });
                draw();
            }
        }

        function drawDots() {
            for (const d of dots) {
                ctx.beginPath();
                ctx.arc(d.col * cellSize, d.row * cellSize, dotRadius, 0, Math.PI * 2);
                if (dots.indexOf(d) % 2 === 0) {
                    ctx.fillStyle = "black";
                } else {
                    ctx.fillStyle = "white";
                }
                ctx.fill();
                ctx.closePath();
            }
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawGrid();
            drawDots();
        }
        draw();

    </script>
  </body>
</html>